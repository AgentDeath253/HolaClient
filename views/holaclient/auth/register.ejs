<%- include('../components/head') %>
  <% if (settings.captcha.enabled==true) { %>
    <script src="https://www.google.com/recaptcha/api.js?render=<%= settings.captcha.site_key %>"></script>
    <% } %>
      <%- include('../components/alert') %>
        <style>
          body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
          }
        </style>

        <body>

          <div class="m-auto xl:container px-12 sm:px-0 mx-auto">
            <div class="mx-auto h-full sm:w-max">
              <div class="m-auto  py-12">
                <div
                  class="mt-12 rounded-3xl border bg-gray-50 dark:border-gray-700 dark:bg-gray-800 -mx-6 sm:-mx-10 p-8 sm:p-10">
                  <h3 class="text-2xl font-semibold text-gray-700 dark:text-white">SignUp on <%= settings.name %>
                  </h3>
                  <div class="mt-12 flex text-center flex-wrap sm:grid gap-6">
                    <button onclick="location.href='../login'"
                      class="w-full h-11 rounded-full bg-gray-900 h-11 flex items-center justify-center px-6 py-3 transition hover:bg-gray-800 focus:bg-gray-700 active:bg-gray-600 dark:bg-gray-700 dark:border dark:border-gray-600 dark:hover:bg-gray-800 dark:hover:border-gray-700">
                      <div class="w-full text-center mx-auto flex items-center justify-center space-x-4 text-white">
                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 640 512">
                          <style>
                            svg {
                              fill: #ffffff
                            }
                          </style>
                          <path
                            d="M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z" />
                        </svg>
                        <span class="block w-max text-sm font-semibold tracking-wide text-white text-center">With
                          Discord</span>
                      </div>
                    </button>
                  </div>

                  <form action="" class="mt-10 space-y-8 dark:text-white">
                    <div>
                      <div
                        class="relative before:absolute before:bottom-0 before:h-0.5 before:left-0 before:origin-right focus-within:before:origin-left before:right-0 before:scale-x-0 before:m-auto before:bg-sky-400 dark:before:bg-sky-800 focus-within:before:!scale-x-100 focus-within:invalid:before:bg-red-400 before:transition before:duration-300">
                        <input id="name" type="text" placeholder="Your name"
                          class="w-full bg-transparent pb-3  border-b border-gray-300 dark:placeholder-gray-300 dark:border-gray-600 outline-none  invalid:border-red-400 transition">
                      </div>
                    </div>

                    <div>
                      <div
                        class="relative before:absolute before:bottom-0 before:h-0.5 before:left-0 before:origin-right focus-within:before:origin-left before:right-0 before:scale-x-0 before:m-auto before:bg-sky-400 dark:before:bg-sky-800 focus-within:before:!scale-x-100 focus-within:invalid:before:bg-red-400 before:transition before:duration-300">
                        <input id="username" type="username" placeholder="Your username"
                          class="w-full bg-transparent pb-3  border-b border-gray-300 dark:placeholder-gray-300 dark:border-gray-600 outline-none  invalid:border-red-400 transition">
                      </div>
                    </div>

                    <div>
                      <div
                        class="relative before:absolute before:bottom-0 before:h-0.5 before:left-0 before:origin-right focus-within:before:origin-left before:right-0 before:scale-x-0 before:m-auto before:bg-sky-400 dark:before:bg-sky-800 focus-within:before:!scale-x-100 focus-within:invalid:before:bg-red-400 before:transition before:duration-300">
                        <input id="email" type="email" placeholder="Your email"
                          class="w-full bg-transparent pb-3  border-b border-gray-300 dark:placeholder-gray-300 dark:border-gray-600 outline-none  invalid:border-red-400 transition">
                      </div>
                    </div>

                    <div class="flex flex-col items-end">
                      <div
                        class="w-full relative before:absolute before:bottom-0 before:h-0.5 before:left-0 before:origin-right focus-within:before:origin-left before:right-0 before:scale-x-0 before:m-auto before:bg-sky-400 dark:before:bg-sky-800 focus-within:before:!scale-x-100 focus-within:invalid:before:bg-red-400 before:transition before:duration-300">
                        <input id="password" type="password" placeholder="Your password"
                          class="w-full bg-transparent pb-3  border-b border-gray-300 dark:placeholder-gray-300 dark:border-gray-600 outline-none  invalid:border-red-400 transition">
                      </div>
                    </div>

                    <div>
                      <button
                        class="w-full rounded-full bg-sky-500 dark:bg-sky-400 h-11 flex items-center justify-center px-6 py-3 transition hover:bg-sky-600 focus:bg-sky-600 active:bg-sky-800">
                        <span onclick="submitForm()"
                          class="text-base font-semibold text-white dark:text-gray-900">SignUp</span>
                      </button>
                      <a href="../auth" type="reset" class="-ml-3 w-max p-3">
                        <span class="text-sm tracking-wide text-sky-600 dark:text-sky-400">Sign In to an existing account</span>
                      </a>
                    </div>
                  </form>
                </div>
                <div class="border-t pt-12 text-gray-500 dark:border-gray-800">
                  <div class="space-x-4 text-center">
                    <span>&copy; 2023 <%= settings.name %></span>
                    <a href="../tos" class="text-sm hover:text-sky-900 dark:hover:text-gray-300">ToS</a>
                    <a href="../pp" class="text-sm hover:text-sky-900 dark:hover:text-gray-300">Privacy Policy</a>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </body>



        <script>
          async function submitForm() {
            event.preventDefault();
            grecaptcha.ready(function () {
              grecaptcha.execute('<%= settings.captcha.site_key %>', { action: 'submit' }).then(function (token) {
                let name = encodeURIComponent(document.getElementById("name").value);
                let username = encodeURIComponent(document.getElementById("username").value);
                let email = encodeURIComponent(document.getElementById("email").value);
                let password = encodeURIComponent(document.getElementById("password").value);
                document.location.href = `/auth/register?first_name=${name}&last_name=email-auth&username=${username}&email=${email}&password=${password}`;
              });
            });
          }